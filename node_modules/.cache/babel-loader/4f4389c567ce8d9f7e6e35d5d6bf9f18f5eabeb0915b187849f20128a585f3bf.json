{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Card,Table,Form,Row,Col,Badge}from'react-bootstrap';import{fetchLatestRCA}from'../api/rca';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const highlightText=(text,highlight)=>{if(!highlight)return text;const parts=text.split(new RegExp(`(${highlight})`,'gi'));return parts.map((part,i)=>part.toLowerCase()===highlight.toLowerCase()?/*#__PURE__*/_jsx(\"span\",{className:\"bg-warning px-1\",children:part},i):part);};const RCALatestCard=()=>{const[results,setResults]=useState([]);const[appIdFilter,setAppIdFilter]=useState('');const[dateFilter,setDateFilter]=useState('');useEffect(()=>{fetchLatestRCA().then(setResults).catch(()=>setResults([]));},[]);const filteredResults=results.filter(r=>{var _r$app_id,_r$date,_r$logdate;return(!appIdFilter||((_r$app_id=r.app_id)===null||_r$app_id===void 0?void 0:_r$app_id.toLowerCase().includes(appIdFilter.toLowerCase())))&&(!dateFilter||((_r$date=r.date)===null||_r$date===void 0?void 0:_r$date.startsWith(dateFilter))||((_r$logdate=r.logdate)===null||_r$logdate===void 0?void 0:_r$logdate.startsWith(dateFilter)));});return/*#__PURE__*/_jsx(Card,{className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Latest RCA Results\"}),/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Form.Control,{placeholder:\"Filter by App ID\",value:appIdFilter,onChange:e=>setAppIdFilter(e.target.value)})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Form.Control,{type:\"date\",value:dateFilter,onChange:e=>setDateFilter(e.target.value)})})]}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Filename\"}),/*#__PURE__*/_jsx(\"th\",{children:\"App ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Explanation\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Events\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredResults.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:5,className:\"text-center\",children:\"No results found\"})}):filteredResults.map((r,idx)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:r.filename}),/*#__PURE__*/_jsx(\"td\",{children:highlightText(r.app_id,appIdFilter)}),/*#__PURE__*/_jsx(\"td\",{children:r.date||r.logdate}),/*#__PURE__*/_jsx(\"td\",{children:r.explanation}),/*#__PURE__*/_jsx(\"td\",{children:Array.isArray(r.events)?r.events.map((e,i)=>/*#__PURE__*/_jsx(Badge,{bg:\"info\",className:\"me-1\",children:e.message||e},i)):r.events})]},idx))})]})]})});};export default RCALatestCard;","map":{"version":3,"names":["React","useEffect","useState","Card","Table","Form","Row","Col","Badge","fetchLatestRCA","jsx","_jsx","jsxs","_jsxs","highlightText","text","highlight","parts","split","RegExp","map","part","i","toLowerCase","className","children","RCALatestCard","results","setResults","appIdFilter","setAppIdFilter","dateFilter","setDateFilter","then","catch","filteredResults","filter","r","_r$app_id","_r$date","_r$logdate","app_id","includes","date","startsWith","logdate","Body","Title","md","Control","placeholder","value","onChange","e","target","type","striped","bordered","hover","responsive","length","colSpan","idx","filename","explanation","Array","isArray","events","bg","message"],"sources":["/Users/mukeshkapoor/projects/logbert_hadoop_rca-bk/frontend/src/components/RCALatestCard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Card, Table, Form, Row, Col, Badge } from 'react-bootstrap';\nimport { fetchLatestRCA } from '../api/rca';\n\nconst highlightText = (text, highlight) => {\n  if (!highlight) return text;\n  const parts = text.split(new RegExp(`(${highlight})`, 'gi'));\n  return parts.map((part, i) =>\n    part.toLowerCase() === highlight.toLowerCase() ? <span key={i} className=\"bg-warning px-1\">{part}</span> : part\n  );\n};\n\nconst RCALatestCard = () => {\n  const [results, setResults] = useState([]);\n  const [appIdFilter, setAppIdFilter] = useState('');\n  const [dateFilter, setDateFilter] = useState('');\n\n  useEffect(() => {\n    fetchLatestRCA().then(setResults).catch(() => setResults([]));\n  }, []);\n\n  const filteredResults = results.filter(r =>\n    (!appIdFilter || r.app_id?.toLowerCase().includes(appIdFilter.toLowerCase())) &&\n    (!dateFilter || (r.date?.startsWith(dateFilter) || r.logdate?.startsWith(dateFilter)))\n  );\n\n  return (\n    <Card className=\"mb-4\">\n      <Card.Body>\n        <Card.Title>Latest RCA Results</Card.Title>\n        <Row className=\"mb-3\">\n          <Col md={6}>\n            <Form.Control\n              placeholder=\"Filter by App ID\"\n              value={appIdFilter}\n              onChange={e => setAppIdFilter(e.target.value)}\n            />\n          </Col>\n          <Col md={6}>\n            <Form.Control\n              type=\"date\"\n              value={dateFilter}\n              onChange={e => setDateFilter(e.target.value)}\n            />\n          </Col>\n        </Row>\n        <Table striped bordered hover responsive>\n          <thead>\n            <tr>\n              <th>Filename</th>\n              <th>App ID</th>\n              <th>Date</th>\n              <th>Explanation</th>\n              <th>Events</th>\n            </tr>\n          </thead>\n          <tbody>\n            {filteredResults.length === 0 ? (\n              <tr><td colSpan={5} className=\"text-center\">No results found</td></tr>\n            ) : (\n              filteredResults.map((r, idx) => (\n                <tr key={idx}>\n                  <td>{r.filename}</td>\n                  <td>{highlightText(r.app_id, appIdFilter)}</td>\n                  <td>{r.date || r.logdate}</td>\n                  <td>{r.explanation}</td>\n                  <td>{Array.isArray(r.events)\n                    ? r.events.map((e, i) => <Badge key={i} bg=\"info\" className=\"me-1\">{e.message || e}</Badge>)\n                    : r.events}\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </Table>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default RCALatestCard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}